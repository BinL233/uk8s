# 集群版本升级

本文主要介绍如何在UK8S集群中，使用版本升级功能。

## 注意事项

1. 目前版本升级仅支持小版本升级，暂不支持大版本升级，例如，1.13.1版本可升级至1.13.10，无法升级至1.17.4。
2. 目前版本升级功能支持1.12，1.13，1.14版本UK8S集群升级至当前小版本的最新UK8S发布小版本，对应关系如下：

|可升级版本|目标版本|
|:--|:--|
|1.12.7|1.12.10|
|1.13.1、1.13.5、1.13.10|1.13.12|
|1.14.5、1.14.6|1.14.10|

## 升级操作

> 请在集群升级之前，在集群中所有节点创建拥有Root权限的账号且保证密码一致，关闭集群中的集群伸缩插件。

我们在集群列表页面，点击操作【更多】按键可以看到【版本升级】。

![](/images/administercluster/list_update.png)

当我们选择的集群符合升级规则，我们可以看到集群升级的目标版本和ssh账号密码。

![](/images/administercluster/check_update.png)

进入集群升级操作后，请耐心等待，不要对集群节点进行操作，确保升级顺利完成。

![](/images/administercluster/cluster_update.png)

升级大约需要5分钟左右，升级过程您可以关闭该页面，并随时可以再次进入【版本升级】查看升级进度。

## 升级失败

如遇升级失败，可以在集群列表页面点击操作【更多】按键可以看到【版本升级】查看升级日志，如是您在升级期间对集群有操作导致的失败您可以根据日志提示修改后，点击【重试】按键。

![](/images/administercluster/failed_update.png)

如【重试】仍未解决集群升级问题，请您与我们技术支持联系，对集群进行诊断。

## 常见升级失败原因

* 集群节点处于关闭或kubelet运行状态不正常
* 集群节点无法正常SSH，密码错误等
* 集群节点可以SSH，但无Root权限
* 集群伸缩插件没有关闭，导致新加入集群的节点无权限操作